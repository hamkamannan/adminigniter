!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t=t||self,e(t.jQuery))}(this,function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function s(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}function a(t){return P.call(t).slice(8,-1).toLowerCase()}function n(t){return"string"==typeof t}function r(t){return"number"==typeof t&&!j(t)}function h(t){return void 0===t}function o(t){return"date"===a(t)&&!j(t.getTime())}function l(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];return function(){for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return t.apply(e,s.concat(a))}}function c(t){return'[data-view="'.concat(t,'"]')}function d(t){return t%4==0&&t%100!=0||t%400==0}function u(t,e){return[31,d(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function f(t,e,i){return Math.min(i,u(t,e))}function p(e){var i=String(e).toLowerCase(),s=i.match(A);if(!s||0===s.length)throw new Error("Invalid date format.");return e={source:i,parts:s},t.each(s,function(t,i){switch(i){case"dd":case"d":e.hasDay=!0;break;case"mm":case"m":e.hasMonth=!0;break;case"yyyy":case"yy":e.hasYear=!0}}),e}function g(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=t(e),a=s.css("position"),n="absolute"===a,r=i?/auto|scroll|hidden/:/auto|scroll/,h=s.parents().filter(function(e,i){var s=t(i);return(!n||"static"!==s.css("position"))&&r.test(s.css("overflow")+s.css("overflow-y")+s.css("overflow-x"))}).eq(0);return"fixed"!==a&&h.length?h:t(e.ownerDocument||document)}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=String(Math.abs(t)),s=i.length,a="";for(t<0&&(a+="-");s<e;)s+=1,a+="0";return a+i}t=t&&t.hasOwnProperty("default")?t.default:t;var m={autoShow:!1,autoHide:!1,autoPick:!1,inline:!1,container:null,trigger:null,language:"",format:"mm/dd/yyyy",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",highlightedClass:"highlighted",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},v="undefined"!=typeof window,w=v?window:{},k=!!v&&"ontouchstart"in w.document.documentElement,D="datepicker",b="click.".concat(D),C="focus.".concat(D),$="hide.".concat(D),x="keyup.".concat(D),F="pick.".concat(D),M="resize.".concat(D),Y="scroll.".concat(D),S="show.".concat(D),T="touchstart.".concat(D),V="".concat(D,"-hide"),I={},N={DAYS:0,MONTHS:1,YEARS:2},P=Object.prototype.toString,j=Number.isNaN||w.isNaN,A=/(y|m|d)+/g,O=/\d+/g,q={show:function(){this.built||this.build(),this.shown||this.trigger(S).isDefaultPrevented()||(this.shown=!0,this.$picker.removeClass(V).on(b,t.proxy(this.click,this)),this.showView(this.options.startView),this.inline||(this.$scrollParent.on(Y,t.proxy(this.place,this)),t(window).on(M,this.onResize=l(this.place,this)),t(document).on(b,this.onGlobalClick=l(this.globalClick,this)),t(document).on(x,this.onGlobalKeyup=l(this.globalKeyup,this)),k&&t(document).on(T,this.onTouchStart=l(this.touchstart,this)),this.place()))},hide:function(){this.shown&&(this.trigger($).isDefaultPrevented()||(this.shown=!1,this.$picker.addClass(V).off(b,this.click),this.inline||(this.$scrollParent.off(Y,this.place),t(window).off(M,this.onResize),t(document).off(b,this.onGlobalClick),t(document).off(x,this.onGlobalKeyup),k&&t(document).off(T,this.onTouchStart))))},toggle:function(){this.shown?this.hide():this.show()},update:function(){var t=this.getValue();t!==this.oldValue&&(this.setDate(t,!0),this.oldValue=t)},pick:function(t){var e=this.$element,i=this.date;this.trigger(F,{view:t||"",date:i}).isDefaultPrevented()||(i=this.formatDate(this.date),this.setValue(i),this.isInput&&(e.trigger("input"),e.trigger("change")))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.shown&&this.showView(this.options.startView)},getMonthName:function(e,i){var s=this.options,a=s.monthsShort,n=s.months;return t.isNumeric(e)?e=Number(e):h(i)&&(i=e),!0===i&&(n=a),n[r(e)?e:this.date.getMonth()]},getDayName:function(e,i,s){var a=this.options,n=a.days;return t.isNumeric(e)?e=Number(e):(h(s)&&(s=i),h(i)&&(i=e)),s?n=a.daysMin:i&&(n=a.daysShort),n[r(e)?e:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},setDate:function(e,i){var s=this.options.filter;if(o(e)||n(e)){if(e=this.parseDate(e),t.isFunction(s)&&!1===s.call(this.$element,e,"day"))return;this.date=e,this.viewDate=new Date(e),i||this.pick(),this.built&&this.render()}},setStartDate:function(t){o(t)||n(t)?this.startDate=this.parseDate(t):this.startDate=null,this.built&&this.render()},setEndDate:function(t){o(t)||n(t)?this.endDate=this.parseDate(t):this.endDate=null,this.built&&this.render()},parseDate:function(e){var i=this.format,s=[];return o(e)||(n(e)&&(s=e.match(O)||[]),e=e?new Date(e):new Date,o(e)||(e=new Date),s.length===i.parts.length&&t.each(s,function(t,s){var a=parseInt(s,10);switch(i.parts[t]){case"dd":case"d":e.setDate(a);break;case"mm":case"m":e.setMonth(a-1);break;case"yy":e.setFullYear(2e3+a);break;case"yyyy":e.setFullYear(2===s.length?2e3+a:a)}})),new Date(e.getFullYear(),e.getMonth(),e.getDate())},formatDate:function(e){var i=this.format,s="";if(o(e)){var a=e.getFullYear(),n=e.getMonth(),r=e.getDate(),h={d:r,dd:y(r,2),m:n+1,mm:y(n+1,2),yy:String(a).substring(2),yyyy:y(a,4)};s=i.source,t.each(i.parts,function(t,e){s=s.replace(e,h[e])})}return s},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(D)}},H={click:function(e){var i=t(e.target),s=this.options,a=this.date,n=this.viewDate,r=this.format;if(e.stopPropagation(),e.preventDefault(),!i.hasClass("disabled")){var h=i.data("view"),o=n.getFullYear(),l=n.getMonth(),c=n.getDate();switch(h){case"years prev":case"years next":o="years prev"===h?o-10:o+10,n.setFullYear(o),n.setDate(f(o,l,c)),this.renderYears();break;case"year prev":case"year next":o="year prev"===h?o-1:o+1,n.setFullYear(o),n.setDate(f(o,l,c)),this.renderMonths();break;case"year current":r.hasYear&&this.showView(N.YEARS);break;case"year picked":r.hasMonth?this.showView(N.MONTHS):(i.addClass(s.pickedClass).siblings().removeClass(s.pickedClass),this.hideView()),this.pick("year");break;case"year":o=parseInt(i.text(),10),a.setFullYear(o),a.setDate(f(o,l,c)),n.setFullYear(o),n.setDate(f(o,l,c)),r.hasMonth?this.showView(N.MONTHS):(i.addClass(s.pickedClass).siblings().removeClass(s.pickedClass),this.hideView()),this.pick("year");break;case"month prev":case"month next":l="month prev"===h?l-1:l+1,l<0?(o-=1,l+=12):l>11&&(o+=1,l-=12),n.setFullYear(o),n.setDate(f(o,l,c)),n.setMonth(l),this.renderDays();break;case"month current":r.hasMonth&&this.showView(N.MONTHS);break;case"month picked":r.hasDay?this.showView(N.DAYS):(i.addClass(s.pickedClass).siblings().removeClass(s.pickedClass),this.hideView()),this.pick("month");break;case"month":l=t.inArray(i.text(),s.monthsShort),a.setFullYear(o),a.setDate(f(o,l,c)),a.setMonth(l),n.setFullYear(o),n.setDate(f(o,l,c)),n.setMonth(l),r.hasDay?this.showView(N.DAYS):(i.addClass(s.pickedClass).siblings().removeClass(s.pickedClass),this.hideView()),this.pick("month");break;case"day prev":case"day next":case"day":"day prev"===h?l-=1:"day next"===h&&(l+=1),c=parseInt(i.text(),10),a.setFullYear(o),a.setMonth(l),a.setDate(c),n.setFullYear(o),n.setMonth(l),n.setDate(c),this.renderDays(),"day"===h&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}}},globalClick:function(t){for(var e=t.target,i=this.element,s=this.$trigger,a=s[0],n=!0;e!==document;){if(e===a||e===i){n=!1;break}e=e.parentNode}n&&this.hide()},keyup:function(){this.update()},globalKeyup:function(t){var e=t.target,i=t.key,s=t.keyCode;this.isInput&&e!==this.element&&this.shown&&("Tab"===i||9===s)&&this.hide()},touchstart:function(e){var i=e.target;this.isInput&&i!==this.element&&!t.contains(this.$picker[0],i)&&(this.hide(),this.element.blur())}},E={render:function(){this.renderYears(),this.renderMonths(),this.renderDays()},renderWeek:function(){var e=this,i=[],s=this.options,a=s.weekStart,n=s.daysMin;a=parseInt(a,10)%7,n=n.slice(a).concat(n.slice(0,a)),t.each(n,function(t,s){i.push(e.createItem({text:s}))}),this.$week.html(i.join(""))},renderYears:function(){var t,e=this.options,i=this.startDate,s=this.endDate,a=e.disabledClass,n=e.filter,r=e.yearSuffix,h=this.viewDate.getFullYear(),o=new Date,l=o.getFullYear(),c=this.date.getFullYear(),d=[],u=!1,f=!1;for(t=-5;t<=6;t+=1){var p=new Date(h+t,1,1),g=!1;i&&(g=p.getFullYear()<i.getFullYear(),-5===t&&(u=g)),!g&&s&&(g=p.getFullYear()>s.getFullYear(),6===t&&(f=g)),!g&&n&&(g=!1===n.call(this.$element,p,"year"));var y=h+t===c,m=y?"year picked":"year";d.push(this.createItem({picked:y,disabled:g,text:h+t,view:g?"year disabled":m,highlighted:p.getFullYear()===l}))}this.$yearsPrev.toggleClass(a,u),this.$yearsNext.toggleClass(a,f),this.$yearsCurrent.toggleClass(a,!0).html("".concat(h+-5+r," - ").concat(h+6).concat(r)),this.$years.html(d.join(""))},renderMonths:function(){var e,i=this.options,s=this.startDate,a=this.endDate,n=this.viewDate,r=i.disabledClass||"",h=i.monthsShort,o=t.isFunction(i.filter)&&i.filter,l=n.getFullYear(),c=new Date,d=c.getFullYear(),u=c.getMonth(),f=this.date.getFullYear(),p=this.date.getMonth(),g=[],y=!1,m=!1;for(e=0;e<=11;e+=1){var v=new Date(l,e,1),w=!1;s&&(y=v.getFullYear()===s.getFullYear(),w=y&&v.getMonth()<s.getMonth()),!w&&a&&(m=v.getFullYear()===a.getFullYear(),w=m&&v.getMonth()>a.getMonth()),!w&&o&&(w=!1===o.call(this.$element,v,"month"));var k=l===f&&e===p,D=k?"month picked":"month";g.push(this.createItem({disabled:w,picked:k,highlighted:l===d&&v.getMonth()===u,index:e,text:h[e],view:w?"month disabled":D}))}this.$yearPrev.toggleClass(r,y),this.$yearNext.toggleClass(r,m),this.$yearCurrent.toggleClass(r,y&&m).html(l+i.yearSuffix||""),this.$months.html(g.join(""))},renderDays:function(){var t,e,i,s=this.$element,a=this.options,n=this.startDate,r=this.endDate,h=this.viewDate,o=this.date,l=a.disabledClass,c=a.filter,d=a.months,f=a.weekStart,p=a.yearSuffix,g=h.getFullYear(),y=h.getMonth(),m=new Date,v=m.getFullYear(),w=m.getMonth(),k=m.getDate(),D=o.getFullYear(),b=o.getMonth(),C=o.getDate(),$=[],x=g,F=y,M=!1;0===y?(x-=1,F=11):F-=1,t=u(x,F);var Y=new Date(g,y,1);for(i=Y.getDay()-parseInt(f,10)%7,i<=0&&(i+=7),n&&(M=Y.getTime()<=n.getTime()),e=t-(i-1);e<=t;e+=1){var S=new Date(x,F,e),T=!1;n&&(T=S.getTime()<n.getTime()),!T&&c&&(T=!1===c.call(s,S,"day")),$.push(this.createItem({disabled:T,highlighted:x===v&&F===w&&S.getDate()===k,muted:!0,picked:x===D&&F===b&&e===C,text:e,view:"day prev"}))}var V=[],I=g,N=y,P=!1;11===y?(I+=1,N=0):N+=1,t=u(g,y),i=42-($.length+t);var j=new Date(g,y,t);for(r&&(P=j.getTime()>=r.getTime()),e=1;e<=i;e+=1){var A=new Date(I,N,e),O=I===D&&N===b&&e===C,q=!1;r&&(q=A.getTime()>r.getTime()),!q&&c&&(q=!1===c.call(s,A,"day")),V.push(this.createItem({disabled:q,picked:O,highlighted:I===v&&N===w&&A.getDate()===k,muted:!0,text:e,view:"day next"}))}var H=[];for(e=1;e<=t;e+=1){var E=new Date(g,y,e),W=!1;n&&(W=E.getTime()<n.getTime()),!W&&r&&(W=E.getTime()>r.getTime()),!W&&c&&(W=!1===c.call(s,E,"day"));var z=g===D&&y===b&&e===C,J=z?"day picked":"day";H.push(this.createItem({disabled:W,picked:z,highlighted:g===v&&y===w&&E.getDate()===k,text:e,view:W?"day disabled":J}))}this.$monthPrev.toggleClass(l,M),this.$monthNext.toggleClass(l,P),this.$monthCurrent.toggleClass(l,M&&P).html(a.yearFirst?"".concat(g+p," ").concat(d[y]):"".concat(d[y]," ").concat(g).concat(p)),this.$days.html($.join("")+H.join("")+V.join(""))}},W="".concat(D,"-top-left"),z="".concat(D,"-top-right"),J="".concat(D,"-bottom-left"),R="".concat(D,"-bottom-right"),G=[W,z,J,R].join(" "),K=function(){function i(s){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,i),this.$element=t(s),this.element=s,this.options=t.extend({},m,I[a.language],t.isPlainObject(a)&&a),this.$scrollParent=g(s,!0),this.built=!1,this.shown=!1,this.isInput=!1,this.inline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}return s(i,[{key:"init",value:function(){var e=this.$element,i=this.options,s=i.startDate,a=i.endDate,n=i.date;this.$trigger=t(i.trigger),this.isInput=e.is("input")||e.is("textarea"),this.inline=i.inline&&(i.container||!this.isInput),this.format=p(i.format);var r=this.getValue();this.initialValue=r,this.oldValue=r,n=this.parseDate(n||r),s&&(s=this.parseDate(s),n.getTime()<s.getTime()&&(n=new Date(s)),this.startDate=s),a&&(a=this.parseDate(a),s&&a.getTime()<s.getTime()&&(a=new Date(s)),n.getTime()>a.getTime()&&(n=new Date(a)),this.endDate=a),this.date=n,this.viewDate=new Date(n),this.initialDate=new Date(this.date),this.bind(),(i.autoShow||this.inline)&&this.show(),i.autoPick&&this.pick()}},{key:"build",value:function(){if(!this.built){this.built=!0;var e=this.$element,i=this.options,s=t(i.template);this.$picker=s,this.$week=s.find(c("week")),this.$yearsPicker=s.find(c("years picker")),this.$yearsPrev=s.find(c("years prev")),this.$yearsNext=s.find(c("years next")),this.$yearsCurrent=s.find(c("years current")),this.$years=s.find(c("years")),this.$monthsPicker=s.find(c("months picker")),this.$yearPrev=s.find(c("year prev")),this.$yearNext=s.find(c("year next")),this.$yearCurrent=s.find(c("year current")),this.$months=s.find(c("months")),this.$daysPicker=s.find(c("days picker")),this.$monthPrev=s.find(c("month prev")),this.$monthNext=s.find(c("month next")),this.$monthCurrent=s.find(c("month current")),this.$days=s.find(c("days")),this.inline?t(i.container||e).append(s.addClass("".concat(D,"-inline"))):(t(document.body).append(s.addClass("".concat(D,"-dropdown"))),s.addClass(V).css({zIndex:parseInt(i.zIndex,10)})),this.renderWeek()}}},{key:"unbuild",value:function(){this.built&&(this.built=!1,this.$picker.remove())}},{key:"bind",value:function(){var e=this.options,i=this.$element;t.isFunction(e.show)&&i.on(S,e.show),t.isFunction(e.hide)&&i.on($,e.hide),t.isFunction(e.pick)&&i.on(F,e.pick),this.isInput&&i.on(x,t.proxy(this.keyup,this)),this.inline||(e.trigger?this.$trigger.on(b,t.proxy(this.toggle,this)):this.isInput?i.on(C,t.proxy(this.show,this)):i.on(b,t.proxy(this.show,this)))}},{key:"unbind",value:function(){var e=this.$element,i=this.options;t.isFunction(i.show)&&e.off(S,i.show),t.isFunction(i.hide)&&e.off($,i.hide),t.isFunction(i.pick)&&e.off(F,i.pick),this.isInput&&e.off(x,this.keyup),this.inline||(i.trigger?this.$trigger.off(b,this.toggle):this.isInput?e.off(C,this.show):e.off(b,this.show))}},{key:"showView",value:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,s=this.$daysPicker,a=this.format;if(a.hasYear||a.hasMonth||a.hasDay)switch(Number(t)){case N.YEARS:i.addClass(V),s.addClass(V),a.hasYear?(this.renderYears(),e.removeClass(V),this.place()):this.showView(N.DAYS);break;case N.MONTHS:e.addClass(V),s.addClass(V),a.hasMonth?(this.renderMonths(),i.removeClass(V),this.place()):this.showView(N.YEARS);break;default:e.addClass(V),i.addClass(V),a.hasDay?(this.renderDays(),s.removeClass(V),this.place()):this.showView(N.MONTHS)}}},{key:"hideView",value:function(){!this.inline&&this.options.autoHide&&this.hide()}},{key:"place",value:function(){if(!this.inline){var e=this.$element,i=this.options,s=this.$picker,a=t(document).outerWidth(),n=t(document).outerHeight(),r=e.outerWidth(),h=e.outerHeight(),o=s.width(),l=s.height(),c=e.offset(),d=c.left,u=c.top,f=parseFloat(i.offset),p=W;j(f)&&(f=10),u>l&&u+h+l>n?(u-=l+f,p=J):u+=h+f,d+o>a&&(d+=r-o,p=p.replace("left","right")),s.removeClass(G).addClass(p).css({top:u,left:d})}}},{key:"trigger",value:function(e,i){var s=t.Event(e,i);return this.$element.trigger(s),s}},{key:"createItem",value:function(e){var i=this.options,s=i.itemTag,a={text:"",view:"",muted:!1,picked:!1,disabled:!1,highlighted:!1},n=[];return t.extend(a,e),a.muted&&n.push(i.mutedClass),a.highlighted&&n.push(i.highlightedClass),a.picked&&n.push(i.pickedClass),a.disabled&&n.push(i.disabledClass),"<".concat(s,' class="').concat(n.join(" "),'" data-view="').concat(a.view,'">').concat(a.text,"</").concat(s,">")}},{key:"getValue",value:function(){var t=this.$element;return this.isInput?t.val():t.text()}},{key:"setValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.$element;this.isInput?e.val(t):this.inline&&!this.options.container||e.text(t)}}],[{key:"setDefaults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.extend(m,I[e.language],t.isPlainObject(e)&&e)}}]),i}();if(t.extend&&t.extend(K.prototype,E,H,q),t.fn){var L=t.fn.datepicker;t.fn.datepicker=function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];var r;return this.each(function(i,a){var h=t(a),o="destroy"===e,l=h.data(D);if(!l){if(o)return;var c=t.extend({},h.data(),t.isPlainObject(e)&&e);l=new K(a,c),h.data(D,l)}if(n(e)){var d=l[e];t.isFunction(d)&&(r=d.apply(l,s),o&&h.removeData(D))}}),h(r)?this:r},t.fn.datepicker.Constructor=K,t.fn.datepicker.languages=I,t.fn.datepicker.setDefaults=K.setDefaults,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=L,this}}});